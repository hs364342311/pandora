(self["webpackChunkchatgpt"]=self["webpackChunkchatgpt"]||[]).push([[473],{6727:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var r=a(3396),s=a(9242),o=a(7139),i=a.p+"static/img/login-logo.57a50f4c.png";const n={class:"login"},d={class:"login-box"},l={class:"container"},u=(0,r._)("div",{class:"top"},[(0,r._)("div",{class:"logo"},[(0,r._)("img",{src:i,alt:""})])],-1),m={class:"mid"},c={style:{display:"inline-flex","flex-grow":"1","padding-top":"15px"}},p={class:"bottom"};function h(e,t,a,i,h,g){const f=(0,r.up)("el-input"),w=(0,r.up)("el-form-item"),y=(0,r.up)("el-form");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",d,[(0,r._)("div",l,[u,(0,r._)("div",m,[(0,r.Wm)(y,{model:h.dataForm,rules:h.dataRule,ref:"dataForm",onKeyup:t[3]||(t[3]=(0,s.D2)((e=>g.dataFormSubmit()),["enter","native"])),"status-icon":""},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{prop:"userName"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{class:"info",modelValue:h.dataForm.userName,"onUpdate:modelValue":t[0]||(t[0]=e=>h.dataForm.userName=e),placeholder:"帐号",size:"large"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(w,{prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{class:"info",modelValue:h.dataForm.password,"onUpdate:modelValue":t[1]||(t[1]=e=>h.dataForm.password=e),type:"password",placeholder:"密码",size:"large"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r._)("div",c,[(0,r._)("input",{type:"button",value:"登录",style:{"flex-grow":"1",height:"40px"},class:"el-button el-button--primary",onClick:t[2]||(t[2]=e=>g.dataFormSubmit())})])])),_:1})])),_:1},8,["model","rules"])])]),(0,r._)("div",p,(0,o.zw)(g.footer),1)])])}var g=a(2241),f=a.n(g);const w="-mall4j-password";function y(e){const t=Date.now(),a=f().enc.Utf8.parse(w),r=f().enc.Utf8.parse(t+e),s=f().AES.encrypt(r,a,{mode:f().mode.ECB,padding:f().pad.Pkcs7});return s.toString()}var v=a(7178),b={components:{},setup(){const{proxy:e}=(0,r.FN)(),t=e.$http;return{http:t}},data(){return{dataForm:{userName:"",password:"",uuid:"",captcha:""},dataRule:{userName:[{required:!0,message:"帐号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},captchaPath:""}},computed:{footer(){return window.systemConfig.footer?window.systemConfig.footer:""}},beforeDestroy(){document.removeEventListener("keyup",this.handerKeyup)},created(){document.addEventListener("keyup",this.handerKeyup)},methods:{handerKeyup(e){var t=document.all?event.keyCode:e.which;13===t&&this.dataFormSubmit()},dataFormSubmit(){this.$refs["dataForm"].validate((e=>{e&&this.login()}))},getUserInfo(e){this.http({headers:{"Content-Type":"multipart/form-data; charset=utf-8","Access-Control-Allow-Origin":"*"},url:this.http.adornUrl("/thirdProfile.do"),method:"get",params:this.$http.adornParams(Object.assign({ticket:e,service:window.systemConfig.casService}))}).then((({data:e})=>{let{id:t}=e;if(!t)return;let a=y(t);this.$cookies.set("Authorization",a),this.$router.replace({name:"home"})})).catch((()=>{this.isSubmit=!1}))},login(){this.isSubmit||(window.systemConfig&&window.systemConfig.casService?(this.isSubmit=!0,this.http({headers:{"Content-Type":"multipart/form-data; charset=utf-8","Access-Control-Allow-Origin":"*"},url:this.http.adornUrl("/thirdLogin.do"),method:"get",params:this.$http.adornParams(Object.assign({username:this.dataForm.userName,password:this.dataForm.password,service:window.systemConfig.casService}))}).then((({data:e})=>{if(e){let{code:t,message:a}=e;return"0"!=t?void(0,v.z8)({message:a||"Error",type:"error",duration:1500}):e}})).then((({ticket:e})=>{e?this.getUserInfo(e):(0,v.z8)({message:"登录失败，请重试!",type:"error",duration:1500})})).catch((()=>{this.isSubmit=!1}))):(0,v.z8)({message:"登录参数缺失，请请联系系统管理员",type:"error",duration:1500}))}}},C=a(89);const F=(0,C.Z)(b,[["render",h]]);var S=F},2480:function(){}}]);